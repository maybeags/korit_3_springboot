# μ…μ‹¤ μ²΄ν¬ ν•΄μ£Όμ„Έμ” !! π

# SpringBoot RESTful API
## REST κΈ°μ΄
### μ •μ
- REST - Representational State Transferμ μ¶•μ•½μ–΄λ΅ μ›Ή μ„λΉ„μ¤λ¥Ό μ μ‘ν•κΈ° μ„ν•
μ•„ν‚¤ν…μ² μ¤νƒ€μΌ. νΉμ • μ–Έμ–΄λ‚ ν”λ«νΌμ— μμ΅΄μ μ΄μ§€ μ•μΌλ©° λ¨λ°”μΌ μ•± κΈ°νƒ€ μ„λΉ„μ¤μ™€
κ°™μ€ λ‹¤μ–‘ν• ν΄λΌμ΄μ–ΈνΈλ“¤μ΄ μ„λ΅ ν†µμ‹ ν•  μ μλ„λ΅ ν•λ”λ° μ΄μ μ΄ μμ.

- κµ¬μ²΄μ μΈ ν‘μ¤€μ΄ μ•„λ‹λΌ λ΅μ΄ ν•„λ”©μ΄λΌλ” μ‚¬λμ΄ μ μ‹ν• μ μ•½ μ΅°κ±΄μ— κ°€κΉμ›€.
### μ μ•½ μ΅°κ±΄
1. μƒνƒ λΉ„μ €μ¥
   - μ„λ²„λ” ν΄λΌμ΄μ–ΈνΈ μƒνƒμ— κ΄€ν• μ–΄λ–¤ μ •λ³΄λ„ μ €μ¥ν•μ§€ μ•μ•„μ•Ό ν•λ‹¤.
2. ν΄λΌμ΄μ–ΈνΈ-μ„λ²„ κ°„μ λ…λ¦½μ„±
    - ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„λ” λ…λ¦½μ μΌλ΅ μ‘λ™ν•΄μ•Ό ν•λ‹¤. μ„λ²„λ” ν΄λΌμ΄μ–ΈνΈμ μ”μ²­μ—†μ΄
        μ–΄λ– ν• μ •λ³΄λ„ μ „μ†΅ν•΄μ„λ” μ•λλ‹¤.
3. μΊμ‹ κ°€λ¥
   - μ—¬λ¬ ν΄λΌμ΄μ–ΈνΈκ°€ λ™μΌν• λ¦¬μ†μ¤λ¥Ό μ”μ²­ν•λ” κ²½μ°κ°€ λ§μΌλ―€λ΅ μ„±λ¥ ν–¥μƒμ„ μ„ν•΄
    λ¦¬μ†μ¤μ— μΊμ‹±μ„ μ μ©ν•΄μ•Ό ν•λ‹¤.
4. μΌκ΄€λ μΈν„°νμ΄μ¤
    - μ„λ΅ λ‹¤λ¥Έ ν΄λΌμ΄μ–ΈνΈμ— μν• μ”μ²­μ΄λ”λΌλ„ μ‘λ‹µμ€ λ™μΌν•κ² λ³΄μ—¬μ•Ό ν•λ‹¤.
    ν΄λΌμ΄μ–ΈνΈμ μλ΅λ” λΈλΌμ°μ €, Java μ• ν”λ¦¬μΌ€μ΄μ…, λ¨λ°”μΌ μ• ν”λ¦¬μΌ€μ΄μ… λ“±
5. κ³„μΈµν• μ‹μ¤ν…
    - μ „μ²΄ μ„λΉ„μ¤μ— μν–¥μ„ μ£Όμ§€ μ•κ³  κµ¬μ„± μ”μ†λ¥Ό μ¶”κ°€ν•κ±°λ‚ μμ •ν•  μ μμ–΄μ•Όν•λ‹¤.
    μ΄ μ μ•½ μ΅°κ±΄μ€ ν™•μ¥μ„±κ³Ό κ΄€λ ¨μ΄ μλ‹¤.
6. μ£Όλ¬Έν• μ½”λ“
    - μ„ νƒμ  μ μ•½ μ΅°κ±΄μΌλ΅, λ€λ¶€λ¶„ μ„λ²„λ” μ •μ  μ»¨ν…μΈ λ¥Ό JSON λλ” XML
      (extended markup language) ν•μ‹μΌλ΅ μ „μ†΅ν•λ‹¤. μ΄ μ μ•½ μ΅°κ±΄μ€ ν•„μ”ν•
    κ²½μ° μ„λ²„κ°€ μ •μ  μ»¨ν…μΈ λ§μ΄ μ•„λ‹λΌ μ‹¤ν–‰ μ½”λ“λ¥Ό μ „μ†΅ν•  μ μμ–΄μ•Ό ν•λ‹¤.

μ΄μƒμ—μ„ μΌκ΄€λ μΈν„°νμ΄μ¤λ” μ¤‘μ”ν• μ μ•½ μ΅°κ±΄μ΄λ©° REST μ•„ν‚¤ν…μ²μ— λ‹¤μ μ”μ†κ°€
ν¬ν•¨λ  ν•„μ”κ°€ μλ‹¤.

- λ¦¬μ†μ¤ μ‹λ³„
  - λ¦¬μ†μ¤λ”κ³ μ  μ‹λ³„μ(μ- μ›Ή κΈ°λ° REST μ„λΉ„μ¤μ URL)λ΅ μ‹λ³„ν•΄μ•Ό ν•¨.
  - REST λ¦¬μ†μ¤λ” μ΄ν•΄ν•κΈ° μ‰¬μ΄ λ””λ ‰ν† λ¦¬ κµ¬μ΅°μ URLμ„ λ…Έμ¶ν•΄μ•Ό ν•¨.
  - μ΄μƒμ„ μ΄μ λ΅ λ¦¬μ†μ¤ λ…λ… μ „λµμ΄ λ§¤μ° μ¤‘μ”.
- ν‘ν„μ„ ν†µν• λ¦¬μ†μ¤ μ΅°μ‘
  - λ¦¬μ†μ¤λ¥Ό μ”μ²­(Request)ν•  λ• μ„λ²„λ” λ¦¬μ†μ¤μ ν‘ν„μΌλ΅ μ‘λ‹µ(Response)ν•΄μ•Όν•¨.
  - μΌλ°μ μΈ ν‘ν„ ν•μ‹μΌλ΅λ” JSON / XML
- μμ²΄ μ„¤λ…μ μΈ λ©”μ‹μ§€
  - λ©”μ‹μ§€λ” μ„λ²„κ°€ μ²λ¦¬ λ°©λ²•μ„ μ• μ μλ” μ¶©λ¶„ν• μ •λ³΄κ°€ ν¬ν•¨λμ–΄μ•Ό ν•¨.
- HATEOAS(HyperMedia As the Engine of Application State).
  - μ‘λ‹µμ—λ” μ„λΉ„μ¤μ λ‹¤λ¥Έ μμ—­μΌλ΅ μ—°κ²°λλ” λ§ν¬κ°€ ν¬ν•¨λμ–΄μ•Ό ν•¨.

λ‹¤ μ‘μ„±ν•μ‹  λ¶„λ“¤μ€ cardatabase2μ— domainκ³Ό κ°™μ€ μ„μΉμ— web ν¨ν‚¤μ§€ μƒμ„±
web ν•μ„μ— CarController ν΄λμ¤ μƒμ„±

## μ¤ν”„λ§ λ¶€νΈλ΅ RESTful μ›Ή μ„λΉ„μ¤ λ§λ“¤κΈ°
1. cardatabase2μ— domainκ³Ό κ°™μ€ μ„μΉμ— web ν¨ν‚¤μ§€ μƒμ„±
2. web ν•μ„μ— CarController ν΄λμ¤ μƒμ„±
3. CarController λ‚΄λ¶€μ—
```java
package com.packt.cardatabase.web;

import org.springframework.web.bind.annotation.RestController;

@RestController
public class CarController {
}
```
4. @RestController μ• λ„ν…μ΄μ…μ€ ν•΄λ‹Ή ν΄λμ¤κ°€ RESTful μ›Ή μ„λΉ„μ¤κ°€ λλ„λ΅ μ§€μ •
5. CarController ν΄λμ¤μ— μƒλ΅μ΄ λ©”μ„λ“λ¥Ό μ¶”κ°€ν•©λ‹λ‹¤.
    λ©”μ„λ“κ°€ λ§¤ν•‘λλ” μ—”λ“ν¬μΈνΈλ¥Ό μ •μν•λ” @RequestMapping μ• λ„ν…μ΄μ…μ„ μ €μ¥
    μ΄ν•μ λ©”μ„λ“λ” 'μ‚¬μ©μκ°€ /cars μ—”λ“ν¬μΈνΈλ΅ GET μ”μ²­μ„ ν•λ©΄ getCars()
    λ©”μ„λ“κ°€ μ‹¤ν–‰'λλ‹¤.
    
    getCars() λ©”μ„λ“λ” λ¨λ“  μλ™μ°¨ κ°μ²΄λ¥Ό λ°ν™ν• λ‹¤μμ— Jackson λΌμ΄λΈλ¬λ¦¬μ—
    μν•΄ μλ™μΌλ΅ JSON κ°μ²΄λ΅ λ§μƒ¬λ§λ©λ‹λ‹¤.
    * λ§μƒ¬λ§ - κ°μ²΄λ¥Ό μΌλ ¨μ λ°”μ΄νΈλ΅ λ³€ν™ν•λ” κ³Όμ •μΌλ΅, κ°μ²΄λ¥Ό μ €μ¥ν•κ±°λ‚ μ „μ†΅
        μ΄ κ°€λ¥. μ—¬κΈ°μ„λ” Java κ°μ²΄λ¥Ό JSON ν•μ‹μ λ¬Έμμ—΄λ΅ λ³€ν™ν•λ” κ²ƒμ΄ ν•΄λ‹Ή 
   
    @GetMappingμ„ ν†µν•΄ /cars μ—”λ“ν¬μΈνΈμ GET μ”μ²­λ§ μ²λ¦¬ν•¨.    
    λ‹¤μ–‘ν• HTTP λ©”μ„λ“(POST / GET / UPDATE / DELETE)μ— λ€ν•
    μ• λ„ν…μ΄μ…(@GetMapping / @PostMapping / @DeleteMapping λ“±)μ΄ μ΅΄μ¬.

6. λ°μ΄ν„°λ² μ΄μ¤μ—μ„ μλ™μ°¨λ¥Ό λ°ν™ν•  μ μκ² ν•λ ¤λ©΄ Controllerμ— CarRepositoryλ¥Ό
    μ£Όμ…ν•΄μ•Ό ν•λ‹¤. κ·Έλ° λ‹¤μ CrudRepositoryμ—μ„ μ κ³µν•λ” findAll() λ©”μ„λ“λ΅
    λ¨λ“  μλ™μ°¨λ¥Ό κ²€μƒ‰ν•  μ μλ‹¤.
    κ·Έλ¬λ©΄ @RestController μ• λ„ν…μ΄μ… λ•λ¶„μ— λ°μ΄ν„°κ°€ μ‘λ‹µμ—μ„ μ•μ•„μ„
    JSON ν•μ‹μ λ¬Έμμ—΄λ΅ μ§λ ¬ν™”λλ‹¤.

```java
package com.packt.cardatabase.web;

import com.packt.cardatabase.domain.Car;
import com.packt.cardatabase.domain.CarRepository;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.RestController;

@RestController
public class CarController {
    private final CarRepository repository;

    public CarController(CarRepository repository) {
        this.repository = repository;
    }

    @GetMapping("/cars")
    public Iterable<Car> getCars() {
        // μλ™μ°¨λ¥Ό κ²€μƒ‰ν•κ³ λ‚μ„ λ°ν™
        return repository.findAll();
    }

}
```

7. μ΄μƒμ μ½”λ“λ¥Ό μ‘μ„±ν•κ³  μ• ν”λ¦¬μΌ€μ΄μ…μ„ μ‹¤ν–‰μ‹ν‚¨ ν›„μ— μ—”λ“ν¬μΈνΈμΈ
    http://localhost:8080/cars λ΅ μ΄λ™ν•΄λ³΄λ©΄, λ¬΄ν•λ£¨ν”„ ν•νƒλ΅ JSON λ°μ΄ν„°κ°€
    μ¶λ ¥λ¨μ„ ν™•μΈν•  μ μλ‹¤.

    μ΄λ” car ν…μ΄λΈ”κ³Ό owner ν…μ΄λΈ” κ°„μ μΌλ€λ‹¤ κ΄€κ³„ λ•λ¬ΈμΌλ΅, ν’€μ–΄μ„ μ„¤λ…ν•λ©΄
    λ¨Όμ € μλ™μ°¨κ°€ μ§λ ¬ν™”λλ©΄ μ—°κ²°λ μ†μ μκ°€ μ§λ ¬ν™”λκ³ , μ΄μ–΄μ„ κ·Έ μ†μ μκ°€
    κ°€μ§„ μλ™μ°¨κ°€ λ‹¤μ‹ μ§λ ¬ν™”λλ” λ°©μ‹μΌλ΅ μ²« λ²μ§Έ car λ°μ΄ν„°λ¥Ό λ¶λ¬μ¤λ©΄μ„
    λ¬΄ν• λ£¨ν”„μ— λΉ μ§€λ” κ²ƒμ΄λ‹¤.

    μ΄μƒμ„ ν•΄κ²°ν•κΈ° μ„ν• λ°©μ• μ¤‘ ν•λ‚λ΅λ” Owner ν΄λμ¤μ μλ™μ°¨ ν•„λ“μ—
    @JsonIgnore μ• λ„ν…μ΄μ…μ„ μ΄μ©ν•μ—¬ μ§λ ¬ν™” ν”„λ΅μ„Έμ¤ μ¤‘μ— μλ™μ°¨ ν•„λ“λ¥Ό
    λ¬΄μ‹ν•λ„λ΅ μ§€μ •ν•λ” κ²ƒμ΄λ‹¤. 

    ν•„μ”ν•μ§€ μ•μ€ κ²½μ° μ–‘λ°©ν–¥ λ§¤ν•‘μ„ μ΄μ©ν•μ§€ μ•μΌλ―€λ΅μ¨ λ¬Έμ λ¥Ό ν•΄κ²°ν•  μλ„ μλ”λ°
    @JsonIgnoreProperties μ• λ„ν…μ΄μ…μ„ ν•¨κ» μ΄μ©ν•μ—¬ ν•μ΄λ²„λ„¤μ΄νΈκ°€ μƒμ„±λ ν•„λ“λ¥Ό
    λ¬΄μ‹ν•λ” λ°©λ²•λ„ μλ‹¤.

    λ‹¤ν•μ‹  λ¶„μ€ Owner.javaλ΅ μ΄λ™ν•©λ‹λ‹¤.
    








